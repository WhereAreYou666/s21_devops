# Операционные системы UNIX/Linux (Базовый).
## Part 1. Установка ОС

![1](./screenshots/1.png)

Проверяем версию Ubuntu:

- "cat /etc/issue"

## Part 2. Создание пользователя

Добовляем пользователя test21 и добавляем его в группу adm:

- "sudo useradd test21 -d /home/test21 -m -G adm -s /bin/bash"

Проверяем добавление:

- "cat /etc/passwd"

![2](./screenshots/2.png)

- "groups test21"

![2.2](./screenshots/2.2.png)

## Part 3. Настройка сети ОС
### Past 3.1-3.2

Зададим название машины вида user-1:

- "sudo hostnamectl set-hostname user-1"

Проверим название машины:

- "hostnamectl"

![3.1](./screenshots/3.1.png)

Установим время соответсвующее местному времени:

- "sudo timedatectl set-timezone Europe/Moscow"

Проверим время:

- "timedatectl"

![3.2](./screenshots/3.2.png)

### Past 3.3 Выводим названия сетевых интерфейсов

Выводим названия сетевых интерфейсов при помощи комады:

- "ip link show"

![3.3](./screenshots/3.3.png)

<b>Loopback Interface(lo)<b>

Loopback Interface, обозначаемый как lo, — это специальный виртуальный сетевой интерфейс в системе, который используется для внутренних коммуникаций внутри самого компьютера.

Зачем он нужен:

- Внутреннее тестирование: Разработчики могут использовать его для тестирования сетевых программ без необходимости физической сетевой карты или подключения к сети.

- Локальные сервисы: Многие программы и службы, работающие на компьютере, общаются через Loopback Interface. Например, веб-сервер, работающий на вашем компьютере, может обслуживать запросы на 127.0.0.1 (localhost).

- Диагностика: Помогает проверить работу сетевых стэков и программ, не взаимодействуя с внешними сетями.

Как он работает:

- IP-адрес: Loopback Interface обычно использует IP-адрес 127.0.0.1, который также известен как localhost.

- Маршрутизация: Любой трафик, отправленный на 127.0.0.1, не покидает компьютер и сразу же возвращается обратно, как будто он путешествовал через сеть.

### Past 3.4 Получаем ip адрес устройства, на котором мы работаем, от DHCP сервера

Команда:

- "ip addr show"

![3.4](./screenshots/3.4.png)

<b>DHCP (Dynamic Host Configuration Protocol)<b> — это сетевой протокол, который позволяет устройствам автоматически получать настройки сети, такие как IP-адрес, маска подсети, шлюз по умолчанию и DNS-серверы. Основная цель DHCP — упростить и автоматизировать управление IP-адресами в сети.

### Past 3.5 Ip-адреса

<b>Внутренний IP-адрес шлюза (IP-адрес по умолчанию)<b>

Команда:

- "ip route | grep default | awk '{print $3}"

![3.5](./screenshots/3.5.png)

<b>Внешний IP-адрес шлюза<b>

Команда:

- "curl ifconfig.me"

![3.5.2](./screenshots/3.5.2.png)

### Past 3.6 Задали статичные настройки ip, gw, dns

Открываем файл:

- "sudo nano /etc/netplan/00-installer-config.yaml"

И редактируем

![3.6](./screenshots/3.6.png)

Команда для принятия изменений:

- "sudo netplan apply"

- "sudo reboot"

### Past 3.7 Проверили внешний и локальный ip шлюза(значения сошлись)

![3.7](./screenshots/3.7.png)

Успешно пропинговали 1.1.1.1 и ya.ru без потерь

![3.7.2](./screenshots/3.7.2.png)

## Part 4. Обновление ОС

![4](./screenshots/4.png)

Команда для обновления: 

- "sudo apt-get upgrade"

## Past 5 Использование команды sudo

Sudo – это утилита для операционных систем семейства Linux, позволяющая пользователю запускать программы с привилегиями другой учётной записи, как правило, суперпользователя.

![5](./screenshots/5.png)

Команды:

- "sudo usermod -aG sudo test21" добавление в группу sudo

- "sudo hostnamectl set-hostname user-2"

![5.2](./screenshots/5.2.png)

## Part 6 Установка и настройка службы времени

Эти команды запустят службу и включат ее для автоматического запуска при каждом старте системы:

- "sudo apt install systemd-timesyncd"

- "sudo systemctl start systemd-timesyncd"

- "sudo systemctl enable systemd-timesyncd"

Убедитесь, что служба работает без ошибок:

- "sudo systemctl status systemd-timesyncd"

![6](./screenshots/6.png)

![6.2](./screenshots/6.2.png)

## Past 7 Установка и использование текстовых редакторов

### Past 7.1 Создание файлов

<b>VIM<b>

- vim test_VIM.txt

![7.1](./screenshots/7.1.png)

VIM Для сохранения и выхода нажал ESC и прописал :w :q

<b>NANO<b>

- nano test_NANO.txt

![7.1.2](./screenshots/7.1.2.png)

NANO Для сохранения нажал ^X далее Yes и название файла

<b>JOE<b>

- joe test_JOE.txt

![7.1.3](./screenshots/7.1.3.png)

JOE Для сохранения и выхода нажал ^KX

### Past 7.2 Изменение файлов без сохранения

<b>VIM<b>

![7.2.1](./screenshots/7.2.1.png)

VIM Для выхода без сохранения ESC -> :q! -> ENTER

<b>NANO<b>

![7.2.2](./screenshots/7.2.2.png)

NANO Для выхода без сохранения ^X -> N

<b>JOE<b>

![7.2.3](./screenshots/7.2.3.png)

JOE Для выхода без сохранения ^C -> y

### Past 7.3 Поиск и замена

<b>VIM<b>

![7.3.1](./screenshots/7.3.1.png)

VIM Для поиска: /что_ищем

![7.3.2](./screenshots/7.3.2.png)

VIM Для замены: :s/что_заменить/чем

**NANO**

![7.3.3](./screenshots/7.3.3.png)

NANO Для поиска: ^W -> что ищем -> ENTER

![7.3.4](./screenshots/7.3.4.png)

NANO Для замены: ^\ -> что заменить -> чем -> Y

**JOE**

![7.3.5](./screenshots/7.3.5.png)

JOE Для поиска: ^K F -> что ищем -> I

![7.3.6](./screenshots/7.3.6.png)

JOE Для замены: ^K F -> что заменить -> R -> чем -> Y

## Past 8 Установка и базовая настройка сервиса SSHD

![8](./screenshots/8.png)

Команда для запуска SSH:

- sudo systemctl enable ssh 

![8.1](./screenshots/8.1.png)

Переписал порт с 22 на 2022

![8.2](./screenshots/8.2.png)

Команды:

- sudo systemctl restart sshd
- ps -e | grep sshd

![8.3](./screenshots/8.3.png)

-tan:

- t - отабражает TCP подключения

- a - Показать состояние всех сокетов; обычно сокеты, используемые серверными процессами не показываются

- n - Показать сетевые адреса как числа. netstat обычно показывает адреса как символы

| Атрибут       | Описание                |
| ------------- |:------------------|
| Proto     | Содержит тип протокола    |
| Recv-Q     | Счетчик байтов не скопированных программой пользователя их этого сокета |
| Send-Q  | Счетчик байтов, не подтвержденных удалленым узлом         |
| Local address  | Адрес и номер порта локального конца сокета        |
| Foreign address  | Адрес и номер порта удаленного конца сокета        |
| State  | Состояние сокета        |

LISTEN - Сокет ожидает входящих подклчений<br>
SYN_SENT - Сокет находящийся в режиме активной попытки установки подключения<br>
0.0.0.0 - это немаршрутизируемый адрес IPv4, который используется в качестве адреса по умолчанию или адреса-заполнителя

## Part 9. Установка и использование утилит top, htop

![9](./screenshots/9.png)

<b>Вывод команды top:<b>

- Uptime: 2 минут
- Пользователей: 1
- Загрузка системы: 0,04, 0,03, 0,00
- Процессы: 86 (1 запущенный, 85 в ожидании)
- Загрузка CPU: 0.0% пользовательского времени, 0.3% системного времени, 99.7% простаивание
- Память: 1972,8 MiB всего, 1516.9 MiB свободно, 125.2 MiB использовано

<b>Использование команды htop<b>

fn + F6-открыть сортировкe

 - отсортированному по PID

![9.1](./screenshots/9.1.png)

- отсортированному по PERCENT_CPU

![9.2](./screenshots/9.2.png)

- отсортированному по PERCENT_MEM

![9.3](./screenshots/9.3.png)

- отсортированному по TIME

![9.4](./screenshots/9.4.png)

fn + F4 для фильтрации

- отфильтрованному для процесса sshd 

![9.5](./screenshots/9.5.png)

fn + F3 для поиска

- с процессом syslog, найденным, используя поиск

![9.6](./screenshots/9.6.png)

fn + F2 

- с добавленным выводом hostname, clock и uptime<br>

![9.7](./screenshots/9.7.png)

## Part 10. Использование утилиты fdisk

- Название: /dev/sda
- Размер: 25 ГБ (гигабайт), что равно 26843545600 байтам.
- Количество секторов: 52428800. 

Разделы:
- /dev/sda1:
Размер: 1.1 ГБ (мегабайт)
Начальный сектор: 2048, Конечный сектор: 2201600.
- /dev/sda2:
Размер: 24 ГБ (гигабайт)
Начальный сектор: 2203648, Конечный сектор: 50223104.

![10](./screenshots/10.png)
![10.2](./screenshots/10.2.png)

## Past 11 Использование утилиты df

Из вывода команды df для корневого раздела (/) следующая информация:

- Размер раздела: 24541264 килобайт
- Размер занятого пространства: 4693164 килобайт
- Размер свободного пространства: 18576140 килобайт
- Процент использования: 21%.
- Единица измерения в выводе - килобайты (1K-blocks).
![11](./screenshots/11.png)

Для корневого раздела (/) из df -Th следующие данные:

- Размер раздела: 24 GB
- Размер занятого пространства: 4.5G
- Размер свободного пространства: 18G
- Процент использования: 21%
- Тип файловой системы: ext4
![11.2](./screenshots/11.2.png)


## Part 12. Использование утилиты du

- ``du``

![12](./screenshots/12.png)

- ``du /home -h``

![12.2](./screenshots/12.2.png)

- ``du /var -h``

![12.3](./screenshots/12.3.png)

- ``sudo du /var/log -h``

![12.4](./screenshots/12.4.png)

- ``sudo du /var/log/* -h``

![12.5](./screenshots/12.5.png)

## Part 13. Установка и использование утилиты ncdu

- ``ncdu ``

![13](./screenshots/13.png)

- ``ncdu /home``

![13.2](./screenshots/13.2.png)

- ``ncdu /var``

![13.3](./screenshots/13.3.png)

- ``ncdu /var/log``

![13.4](./screenshots/13.4.png)

## Part 14 Работа с системными журналами

**Последняя авторизация**

![14](./screenshots/14.png)

**Перезапуск OpenSSH Server**

![14.2](./screenshots/14.2.png)

![14.3](./screenshots/14.3.png)

![14.4](./screenshots/14.4.png)

## Part 15. Использование планировщика заданий CRON

- ``crontab -e``

![15](./screenshots/15.png)

- ``grep CRON /var/log/syslog``

![15.2](./screenshots/15.2.png)

- ``crontab -l``

![15.3](./screenshots/15.3.png)

Удаление задач:
- ``crontab -r``
- ``crontab -l``

![15.4](./screenshots/15.4.png)